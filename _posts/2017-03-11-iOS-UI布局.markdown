---
title: "iOS UI å¸ƒå±€"
layout: post
date: 2017-03-11 23:30
tag: iOS
category: blog
author: stonen
---

# UIStackView

> **åŸæ–‡å‡ºè‡ªï¼š**[**ä»€ä¹ˆæ˜¯UIStackView ?**](http://www.cnblogs.com/ChouDanDan/p/5209775.html)

------

## ä»€ä¹ˆæ˜¯UIStackViewï¼Ÿ

ã€€ã€€åœ¨`iOS9`ä¸­è‹¹æœåœ¨`UIKit`æ¡†æ¶ä¸­å¼•å…¥äº†ä¸€ä¸ªæ–°çš„è§†å›¾ç±»`UIStackView`ã€‚`UIStackView`ç±»å¯ä»¥å¸®æˆ‘ä»¬å¸ƒå±€UIæ§ä»¶ï¼Œè€Œæˆ‘ä»¬ä¸éœ€è¦è®¾ç½®ä»»ä½•çº¦æŸæˆ–è®¾ç½®å¾ˆå°‘çš„çº¦æŸå°±å¯ä»¥ï¼Œå…¶ä»–éƒ½ç”±`UIStackView`å¸®æˆ‘ä»¬è‡ªåŠ¨å®Œæˆäº†ã€‚

`ã€€ã€€UIStackView`æä¾›äº†ä¸¤ä¸ªæ–¹å‘çš„çº¦æŸï¼Œå‚ç›´å¸ƒå±€å’Œæ°´å¹³å¸ƒå±€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`UILayoutConstraintAxis`æšä¸¾å€¼æ¥æŸ¥çœ‹ä¸¤ç§å¸ƒå±€æ–¹å¼ã€‚

ã€€ã€€å¦‚æœåˆå­¦è€…æ¥å­¦ä¹ `UIStackView`æ¯”è¾ƒæŠ½è±¡ï¼Œä¸å¤ªå¥½æ¥è§¦è¿™ä¸ªæ–°çš„æ§ä»¶ï¼Œè€Œä¸”å¾ˆå®¹æ˜“å‡ºé”™ï¼Œå…ˆçœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªGIFæ¥åˆæ­¥äº†è§£ä¸€ä¸‹è¿™ä¸ªæ§ä»¶å§ã€‚

![850342-20160223141112818-1227778081](/assets/images/850342-20160223141112818-1227778081.gif)

## UIStackView

ã€€ã€€åœ¨`Interface Builder`ä¸­ä½¿ç”¨`UIStackView`å°±ç±»ä¼¼äºä½¿ç”¨ä¸€ä¸ªUIæ§ä»¶ä¸€æ ·ï¼Œé€šè¿‡è®©å°†å…¶ä»–è§†å›¾æˆä¸º`UIStackView`çš„å­è§†å›¾æ¥è¿›è¡Œå¸ƒå±€çš„ï¼Œ`UIStackView`ä¹Ÿå¯ä»¥åµŒå¥—å¤šä¸ª`UIStackView`ã€‚

ã€€ã€€å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ`UIStackView`è™½ç„¶ç»§æ‰¿è‡ª`UIView`ï¼Œä½†æ˜¯å¹¶ä¸å‚ä¸å±å¹•çš„æ¸²æŸ“ï¼Œé‡å†™`drawRect:`æ–¹æ³•ä¹Ÿæ˜¯æ— æ•ˆçš„ã€‚

##### UIStackViewç»§æ‰¿é“¾æ¡ï¼Œè‡ªèº«ç‰¹æ€§ç­‰ä¿¡æ¯![850342-20160223141214083-1640121682](/assets/images/850342-20160223141214083-1640121682.png)

## æšä¸¾å€¼

`ã€€ã€€Interface Builder`ä¸­çš„`UIStackView`æ§ä»¶ï¼Œå³ä¾§è®¾ç½®é¢æ¿ä¸­æä¾›äº†ä¸€äº›é€‰é¡¹ï¼Œè¿™äº›è®¾ç½®æ˜¯å¯¹åº”ç€ä»£ç ä¸­çš„æšä¸¾å€¼çš„ï¼š

- Axis
  `Horizontal -> UILayoutConstraintAxisHorizontal`
  æ°´å¹³æ–¹å‘å¸ƒå±€
  `Vertical -> UILayoutConstraintAxisVertical`
  å‚ç›´æ–¹å‘å¸ƒå±€
- Distribution
  `Fill -> UIStackViewDistributionFill`
  å¡«å……æ•´ä¸ª*UIStackView*ï¼Œå¹¶ä¸”æ ¹æ®å†…éƒ¨å­è§†å›¾å°ºå¯¸å¯¹å­è§†å›¾å°ºå¯¸è¿›è¡ŒåŠ¨æ€è°ƒæ•´ã€‚
  `Fill Equally -> UIStackViewDistributionFillEqually`
  æ ¹æ®è§†å›¾å¤§å°å¹³å‡åˆ†é…*UIStackView*å°ºå¯¸ï¼Œç­‰æ¯”ä¾‹å¡«å……*UIStackView*ï¼Œè¿‡ç¨‹ä¸­ä¼šæ ¹æ®åˆ†é…çš„å¤§å°æ”¹å˜å­è§†å›¾å°ºå¯¸ã€‚
  `Fill Proportionally -> UIStackViewDistributionFillProportionally`
  æ ¹æ®ä¹‹å‰çš„æ¯”ä¾‹å¡«å……*UIStackView*ã€‚
  `Equal Spacing -> UIStackViewDistributionEqualSpacing`
  å¡«å……æ•´ä¸ª*UIStackView*ï¼Œå­è§†å›¾æ²¡æœ‰å æ»¡*UIStackView*å°†ä¼šç”¨ç©ºç™½å¹³å‡å¡«å……å­è§†å›¾ä¸­é—´çš„é—´è·ï¼Œè¶…å‡º*UIStackView*å°†ä¼šæ ¹æ®*arrangedSubviews*æ•°ç»„ä¸‹æ ‡å‹ç¼©å­è§†å›¾ã€‚
  `Equal Centering -> UIStackViewDistributionEqualCentering`
  å¹³å‡åˆ†é…å­è§†å›¾å¾—åˆ°æ¯ä¸ªè§†å›¾çš„ä¸­å¿ƒç‚¹ï¼Œä½¿ç”¨è¿™ä¸ªä¸­å¿ƒç‚¹æ¥å¸ƒå±€æ¯ä¸ªå­è§†å›¾ï¼Œå¹¶ä¸”ä¿æŒ*spacing*è·ç¦»ï¼Œè¶…å‡ºå°†ä¼šé‡æ–°å¸ƒå±€å­è§†å›¾ï¼Œå¹¶å‹ç¼©éƒ¨åˆ†å­è§†å›¾ã€‚
- Alignment
  `Fill -> UIStackViewAlignmentFill`
  è§†å›¾çºµå‘å¡«å……
  `Top -> UIStackViewAlignmentTop`
  è§†å›¾å‘ä¸Šå¯¹å…¶(é€‚ç”¨äº*Horizontal*æ¨¡å¼)
  `Center -> UIStackViewAlignmentCenter`
  è§†å›¾å±…ä¸­å¯¹å…¶
  `Bottom -> UIStackViewAlignmentBottom`
  è§†å›¾å‘ä¸‹å¯¹å…¶(é€‚ç”¨äº*Horizontal*æ¨¡å¼)
  `First Baseline -> UIStackViewAlignmentFirstBaseline`
  æ ¹æ®ä¸Šæ–¹åŸºçº¿å¸ƒå±€æ‰€æœ‰å­è§†å›¾çš„*y*å€¼(é€‚ç”¨äº*Horizontal*æ¨¡å¼)
  `Last Baseline -> UIStackViewAlignmentLastBaseline`
  æ ¹æ®ä¸‹æ–¹åŸºçº¿å¸ƒå±€æ‰€æœ‰å­è§†å›¾çš„*y*å€¼(é€‚ç”¨äº*Horizontal*æ¨¡å¼)
  `trailing -> UIStackViewAlignmentTrailing`
  è§†å›¾å‘å·¦å¯¹é½(é€‚ç”¨äº*Vertical*æ¨¡å¼)
  `leading -> UIStackViewAlignmentLeading`
  è§†å›¾å‘å³å¯¹é½(é€‚ç”¨äº*Vertical*æ¨¡å¼)
- spacing
  `spacing -> CGFloat spacing`
  å­æ§ä»¶ä¹‹é—´çš„æœ€å°è·ç¦»

ã€€ã€€ã€€ã€€å¯ä»¥æ ¹æ®ä¸‹é¢çš„å›¾ç‰‡ç»“åˆä¸Šé¢çš„æšä¸¾å€¼è”ç³»èµ·æ¥æ¯”è¾ƒå¥½ç†è§£

![850342-20160223141315521-816832635](/assets/images/850342-20160223141315521-816832635.png)

## arrangedSubviewsæ•°ç»„

`ã€€ã€€UIStackView`ä½¿ç”¨`arrangedSubviews`æ•°ç»„æ¥ç®¡ç†å­è§†å›¾ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ªæ•°ç»„æ˜¯ä¸€ä¸ª`readonly`çš„å±æ€§ï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨æ–¹æ³•å¯¹`arrangedSubviews`æ•°ç»„è¿›è¡Œæ“ä½œã€‚

ã€€ã€€åˆå§‹åŒ–æ•°ç»„:
`ã€€ã€€- (instancetype)initWithArrangedSubviews:(NSArray<__kindof UIView *> *)views;`
ã€€ã€€æ·»åŠ å­è§†å›¾:
`ã€€ã€€- (void)addArrangedSubview:(UIView *)view;`
ã€€ã€€ç§»é™¤å­è§†å›¾:
`ã€€ã€€- (void)removeArrangedSubview:(UIView *)view;`
ã€€ã€€æ ¹æ®ä¸‹æ ‡æ’å…¥è§†å›¾:
`ã€€ã€€- (void)insertArrangedSubview:(UIView *)view atIndex:(NSUInteger)stackIndex;`

## å°è¯•ç‰›åˆ€

ã€€ã€€æˆ‘ä»¬å¯ä»¥ä»`Interface Builder`å³ä¾§çš„æ“ä½œé¢æ¿ä¸­ï¼Œé€‰æ‹©`UIStackView`æ§ä»¶ç›´æ¥æ‹–åˆ°`XIB`ä¸­ã€‚å¯ä»¥é€‰æ‹©`Horizontal`å’Œ`Vertical`ä¸¤ä¸ªæ–¹å‘çš„`UIStackView`ï¼Œä¹Ÿå¯ä»¥åœ¨æ‹–åˆ°`XIB`ä¸­ä¹‹åæ‰‹åŠ¨ä¿®æ”¹ã€‚

![850342-20160223141431396-1614421270](/assets/images/850342-20160223141431396-1614421270.png)

â€‹	ç„¶åå°†ä¸¤ä¸ª`View`æ‹–åˆ°è¿™ä¸ª`UIStackView`ä¸­ï¼Œçˆ¶è§†å›¾ä¹Ÿå¯ä»¥å°†`UIStackView`ä½œä¸ºå­è§†å›¾æ¥è¿›è¡Œå¤šå±‚`UIStackView`åµŒå¥—ï¼Œè¿™ä¹Ÿæ˜¯è‹¹æœæ¨èçš„åšæ³•ã€‚

![850342-20160223141511505-590301401](/assets/images/850342-20160223141511505-590301401.png)

â€‹	æ‰“å¼€å³ä¾§è®¾ç½®é¢æ¿æ¥è®¾ç½®`UIStackView`çš„ä¸€äº›å±æ€§ï¼Œè¾¾åˆ°æ›´å¥½çš„å¸ƒå±€æ•ˆæœã€‚

![850342-20160223141601068-641465840](/assets/images/850342-20160223141601068-641465840.png)

ã€€ã€€é™¤äº†ä¸Šé¢çš„æ–¹æ³•ä¹Ÿå¯ä»¥åœ¨`XIB`ä¸­ç›´æ¥é€‰æ‹©å¤šä¸ª`View`ï¼Œç„¶åç‚¹å‡»å³ä¸‹æ–¹çš„`Stack`æŒ‰é’®ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ¨æ–­å¸ƒå±€æ–¹å¼ï¼Œå¸®æˆ‘ä»¬è‡ªåŠ¨å¸ƒå±€å­è§†å›¾ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç³»ç»Ÿå¸ƒå±€ä¹‹ååœ¨æ‰‹åŠ¨è¿›è¡Œè°ƒæ•´ã€‚

![850342-20160223141629536-2074680886](/assets/images/850342-20160223141629536-2074680886.png)

ã€€ã€€ä»£ç å¸ƒå±€å…¶å®æœ¬è´¨ä¸Šå°±æ˜¯å¯¹æ•°ç»„è¿›è¡Œæ“ä½œï¼Œæ•°ç»„ä¸­å­˜å‚¨çš„æ˜¯`UIStackView`çš„å­è§†å›¾ã€‚ç„¶åé€šè¿‡è®¾ç½®`UIStackView`çš„æšä¸¾å€¼å±æ€§è¿›è¡Œé¡µé¢æ’å¸ƒã€‚ä»£ç å¸ƒå±€çš„æ–¹å¼è¿™é‡Œå°±ä¸æ¼”ç¤ºäº†ã€‚ã€‚ã€‚ğŸ˜‰

## UIStackViewå’ŒNSLayoutConstraintå¸ƒå±€è½¬æ¢

ã€€ã€€å¦‚æœä½ ä¹‹å‰çš„é¡¹ç›®ä¸­å·²ç»æœ‰çº¦æŸï¼Œåªéœ€è¦å°†æ·»åŠ `UIStackView`ç®¡ç†UIæ§ä»¶çº¦æŸæ¸…é™¤ã€‚é€‰ä¸­éœ€è¦æ·»åŠ çš„UIæ§ä»¶ï¼Œç‚¹å‡»å³ä¸‹æ–¹çš„`Stack`æŒ‰é’®å°±å¯ä»¥ã€‚

![850342-20160223141705661-808048020](/assets/images/850342-20160223141705661-808048020.png)

------

> **ä»¥ä¸ŠåŸæ–‡å‡ºè‡ªï¼š**[**ä»€ä¹ˆæ˜¯UIStackView ?**](http://www.cnblogs.com/ChouDanDan/p/5209775.html)

------



> ä»¥ä¸‹å†…å®¹æ‘˜è‡ª[æ³Šå­¦ç½‘](https://boxueio.com/series/started-with-ui-tableview/ebook/69)

### Axis & Alignment

- æ ¹æ®æˆ‘ä»¬æŠŠUIæ§ä»¶æ’åˆ—è¿› **UIStackView** çš„æ–¹å¼ï¼Œ**UIStackView** å®šä¹‰äº†ä¸¤ä¸ª**_Axis_**ï¼š

  ![bo-reading-uitableview-demo4-21@2x](/assets/images/bo-reading-uitableview-demo4-21@2x.jpg)

- æ— è®ºæ˜¯æ°´å¹³è¿˜æ˜¯å‚ç›´æ’åˆ—ï¼Œå½“æ’åˆ—è¿› **UIStackView** çš„æ§ä»¶å¤§å°ä¸åŒæ—¶ï¼Œå°±è¦é€šè¿‡ **_Alignment_** æŒ‡å®šä»–ä»¬å¯¹é½çš„æ–¹å¼ï¼š

  - å½“ â€œ**Horizental**â€ æ’åˆ—æ—¶ï¼Œ**_Alignment_** æ”¯æŒ **6** ç§å¯¹é½æ–¹å¼ï¼š

    ![bo-reading-uitableview-demo4-22@2x](/assets/images/bo-reading-uitableview-demo4-22@2x.jpg) 

  - å½“ â€œ**Vertical**â€ æ’åˆ—æ—¶ï¼Œ**_Alignment_** æ”¯æŒ **4** ç§å¯¹é½æ–¹å¼ï¼š

    ![bo-reading-uitableview-demo4-23@2x](/assets/images/bo-reading-uitableview-demo4-23@2x.jpg)

### Content hugging & Content compression resistance

- ç®€å•æ¥è¯´ï¼Œ**_content hugging priority_** è¡¨ç¤ºäº†ä¸€ä¸ªå¯¹è±¡**"æ‹’ç»å˜å¤§"çš„å¼ºçƒˆç¨‹åº¦**ï¼Œå€¼è¶Šé«˜ï¼Œå°±è¡¨ç¤ºå¯¹è±¡åœ¨æ°´å¹³æˆ–å‚ç›´æ–¹å‘æ‹’ç»å˜å¤§çš„æ„æ„¿è¶Šå¼ºçƒˆï¼›è€Œ **_content compression resistance_** åˆ™è¡¨ç¤ºäº†ä¸€ä¸ªå¯¹è±¡**"æ‹’ç»è¢«å‹ç¼©"çš„å¼ºçƒˆç¨‹åº¦**ï¼Œå€¼è¶Šé«˜ï¼Œå°±è¡¨ç¤ºå¯¹è±¡åœ¨æ°´å¹³æˆ–å‚ç›´æ–¹å‘æ‹’ç»è¢«å‹ç¼©çš„æ„æ„¿è¶Šå¼ºçƒˆã€‚

  ![bo-reading-uitableview-demo4-25@2x](/assets/images/bo-reading-uitableview-demo4-25@2x.jpg)